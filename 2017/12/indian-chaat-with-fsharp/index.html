

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.30.2 with theme Tranquilpeak 0.4.3-BETA">
    <title>Indian Chaat with F#</title>
    <meta name="author" content="Kunjan Dalal">
    <meta name="keywords" content="">

    <link rel="icon" href="http://kunjan.in/favicon.png">
    

    
    <meta name="description" content="Here is my Birthday blog post, as a part of FSAdvent - 2017. Just like previous two years, I hope you will enjoy this one too. Comments and corrections are very much welcomed.
 Why Chaat? and What is Chaat? If anyone wanted to show real time application, then Chat is kind of to-do list of that type of applications. Now Functional Chat is a very limited title and can&rsquo;t show all the things I wanted to show.">
    <meta property="og:description" content="Here is my Birthday blog post, as a part of FSAdvent - 2017. Just like previous two years, I hope you will enjoy this one too. Comments and corrections are very much welcomed.
 Why Chaat? and What is Chaat? If anyone wanted to show real time application, then Chat is kind of to-do list of that type of applications. Now Functional Chat is a very limited title and can&rsquo;t show all the things I wanted to show.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Indian Chaat with F#">
    <meta property="og:url" content="/2017/12/indian-chaat-with-fsharp/">
    <meta property="og:site_name" content="Kunjan&#39;s Web Space">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Kunjan&#39;s Web Space">
    <meta name="twitter:description" content="Here is my Birthday blog post, as a part of FSAdvent - 2017. Just like previous two years, I hope you will enjoy this one too. Comments and corrections are very much welcomed.
 Why Chaat? and What is Chaat? If anyone wanted to show real time application, then Chat is kind of to-do list of that type of applications. Now Functional Chat is a very limited title and can&rsquo;t show all the things I wanted to show.">
    
      <meta name="twitter:creator" content="@kunjee">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/3d7c012bb27ad7b2f40976c5edc58968?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="http://kunjan.in/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="http://kunjan.in/">Kunjan&#39;s Web Space</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="http://kunjan.in/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/3d7c012bb27ad7b2f40976c5edc58968?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Kunjan Dalal</h4>
        
          <h5 class="sidebar-profile-bio"><em>All idea, opinion are my own and don&rsquo;t reflect opinion of my current or any former employer.</em></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/resume">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Resume</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/kunjee17" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://kunjan.in/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Indian Chaat with F#
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2017-12-17T00:00:00Z">
        
  December 17, 2017

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="http://kunjan.in/categories/technical">Technical</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<blockquote>
<p>Here is my Birthday blog post, as a part of <a href="https://sergeytihon.com/2017/10/22/f-advent-calendar-in-english-2017/">FSAdvent - 2017</a>. Just like previous two years, I hope you will enjoy this one too. Comments and corrections are very much welcomed.</p>
</blockquote>

<h1 id="why-chaat-and-what-is-chaat">Why Chaat? and What is Chaat?</h1>

<p>If anyone wanted to show <code>real time</code> application, then <code>Chat</code> is kind of <code>to-do list</code> of that type of applications. Now <strong>Functional Chat</strong> is a very limited title and can&rsquo;t show all the things I wanted to show. So, I have selected <a href="https://www.google.com/search?biw=1920&amp;bih=940&amp;tbm=isch&amp;sa=1&amp;ei=sdMzWrLMKYn9vgSBhpz4DA&amp;q=Indian+Chaat&amp;oq=Indian+Chaat&amp;gs_l=psy-ab.3..0l10.3694.16984.0.17138.15.13.1.0.0.0.297.1972.0j4j5.9.0....0...1c.1.64.psy-ab..5.10.1991...0i67k1.0.IJpHl8f_YYA">Chaat</a> word a spin of version of <code>Chat</code> word.</p>

<p>Here also I am showing a little diverted version of <a href="(https://safe-stack.github.io/)">SAFE</a>. So, title is kind of more suitable.</p>

<p>One thing is very unique to Indian Chaat that there is no uniqueness in it. You change the city, order same thing and you will get a different version of it, and that is the heart of it.</p>

<p>Currently that is possible with <em>dotnet core</em> . Be it on any OS, using any editor/IDE, using any Framework and still things work.</p>

<blockquote>
<p>So, what I will do here in this post. I will try to make Simple <strong>Chat</strong> application by picking up my <em>favorite</em> frameworks or libraries. And also give reasons for that. In <code>Epilogue</code> I will try to provide all other options that can be replaced or mixed matched. So, you can try it to make your version.</p>
</blockquote>

<h1 id="current-state-of-dotnet-core">Current state of dotnet core</h1>

<p>Dotnet core is an <strong>unbiased</strong> version of dotnet. Currently it is having version <code>2.*.*</code> . It kind of works on every OS. And especially with other editors. Also more openly developed. It may not be best, but credit should be given. So, here I am using that. If you are sticking with <em>Dotnet</em>, be it a big fat company or start up. And <em>if you are not making Desktop application</em>, then you should be moving to <em>core</em> for sure.</p>

<h1 id="functional-programming-with-f">Functional Programming with F#</h1>

<p>There are many Microsoft people may tell you, don&rsquo;t worry about <code>F#</code> and should take care of requirements on hand first. I am saying the same thing, for the sake of <em>requirements</em> you should be using F#. <em>C#</em> may be good and supported by Microsoft wholeheartedly, but as developers we should choose our things based on the task at our hand. And from personal experience of around 10 Years in Software Industry. Few things are already proven for current time, Functional First / Functional language is already a winner, no matter how many <a href="http://tomasp.net/blog/csharp-async-gotchas.aspx/">functional features will be added to OOP languages</a> they are still not like functional language. OOP language never designed for that. They have done what they are designed for but I am not sure what place they have in future. Be it ReasonML, ELM, Scala or F#. Statically typed or not, but all will be functional for sure. Another thing is <em>Big projects</em>, be it a server or a client with combined with fast pace delivery; is base problem for almost every company. Make a peace with it and choose it accordingly.</p>

<h1 id="visual-studio-code">Visual Studio <em>Code</em></h1>

<p>While making this project I have used VSCode. Whatever bad <code>karma</code> earned by Visual Studio, VSCode is leveling it. And leveling them quite well. VSCode with <a href="http://ionide.io/">ionide</a> is quite killing it. It is not the beast like its counterpart, but surely get things done and it is quite faster.</p>

<h1 id="servicestack">ServiceStack</h1>

<p><a href="https://servicestack.net/">Servicestack</a> is built with C#, and OOP framework. It was/is good old alternative of WCF, If WCF is still around? Then it became better version of WebAPI (WebAPI is more or less inspired by ServiceStack). Currently it is already <a href="http://docs.servicestack.net/releases/v5.0.0">V5</a>. And it is quite mature and flexible. Also providing way many things out of box. When there was a vacuum in F# specific web framework, <a href="https://servicestack.net/">Servicestack</a> was kind of choice of F# people. And there are obvious reasons for that. Not only it works with F# but looks way better with it. And vision of Servicestack was quite futuristic, it is one of the first to force developer to think in message while doing web development. And cut to <strong>2017</strong> every good development strategy talks about message driven development in client side. Take is react-redux, <a href="http://elm-lang.org/">Elm</a> or <a href="https://fable-elmish.github.io/elmish/">Fable-Elmish</a>. <a href="https://guide.elm-lang.org/architecture/">The Elm Architecture</a> is the way to go for making big application on client side.</p>

<p>Take an example here.</p>

<p>Here are DTOs</p>

<pre><code class="language-fsharp">    [&lt;CLIMutableAttribute&gt;]
    type Message = {
        Data : string
        Color : string
    }


    [&lt;CLIMutableAttribute&gt;]
    type OutPutMessages = {
        Data : Message []
    }

    [&lt;CLIMutableAttribute&gt;]
    [&lt;Route(&quot;/Chat&quot;)&gt;]
    type InputMessage = {
        UserId : int
        Created : DateTime
        Message : Message
    } with interface IReturn&lt;OutPutMessages&gt;

</code></pre>

<p>And here is Service</p>

<pre><code class="language-fsharp">    type ServerEventsServices() =
        inherit Service()

        member __.Post(request : InputMessage) =
            chaatAgent.Post request
            {Data = storage.ToArray()} |&gt; box

</code></pre>

<p>If you skip <em>little code for configuration,</em> then this may be the simplest way to understand any web service. Everything is a message. Just like that. Skip the <em>Agent</em> line for now.</p>

<h1 id="fable">Fable</h1>

<p><a href="http://fable.io/">Fable</a> is one of many <em>your favorite language</em> to <em>JavaScript</em> transpiler. Fable here is converting quite a mature functional language F#. I like to quote <a href="https://reasonml.github.io/guide/what-and-why">ReasonML</a> page here that also suggesting Fable as one of the alternative if not ReasonML. It is easy to use like Elm with the same time it more flexible then it. I know flexibility comes with cost, but I find it better than banging head for rigid framework. It is best of both worlds.</p>

<h2 id="elmish">Elmish</h2>

<p>As I mentioned Elm architecture is a way to move forward if you are making big / fat business application. From personal experience I can say if you are or your team or team you know is using <strong>Angularjs</strong> specifically 1.0 to make big application. Tell them to change or just run away from there.</p>

<p>Elmish is a thin wrapper around react to provide Elm like architecture without any redux complexity. It will provide you message driven architecture to work with.</p>

<p>Here is comparison between Redux and Elm in a single tweet.</p>

<p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Elm(ish) vs. Redux Workflow 🙄🤫🤔 <a href="https://t.co/naAkxQLFaB">pic.twitter.com/naAkxQLFaB</a></p>&mdash; MikeBild (@mikebild) <a href="https://twitter.com/mikebild/status/888042176738971649?ref_src=twsrc%5Etfw">July 20, 2017</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>Elmish architecture has three main parts. <strong>Model -&gt; View -&gt; Update</strong></p>

<h4 id="model">Model</h4>

<pre><code>    type [&lt;StringEnum&gt;]SpanCls = Red | Blue | Green | Yellow

    type Model =  {
        LocalStr : string
        ServerMessages : Message []
        SpanCls : SpanCls
    }

    type Msg =
    | ChangeStr of string
    | ChangeColor of SpanCls
    | PreparePost
    | PostMessage of InputMessage
    | SuccessMessages of OutPutMessages
    | SSESuccessMessages of OutPutMessages
    | Failed of exn

</code></pre>

<p>Forget about the <em>Model</em> part now. As it is just a representation for view. More important here is <em>Msg</em>. If you can see <em>of InputMessage</em> and <em>of OutputMessages</em> both are directed from Server. And all three messages, including with <em>Failed</em> are there to communicate with the Server. It is in direct connection with Server&rsquo;s DTOs. Other msg is to handle user event from view. So, every communication is divided with specific messages and handled in State/Update.</p>

<h4 id="view">View</h4>

<pre><code>    let root model dispatch =
        div [] [
            Content.content [] [
            ul [] [
                for m in model.ServerMessages do
                yield
                    li[][
                    span [ClassName m.color][str m.data]
                    ]
            ]
            ]

            br []
            br []
            p [ClassName (model.SpanCls.ToString())] [str (sprintf &quot;local message %s&quot; model.LocalStr)]


            Control.control_div [] [
            Radio.radio [CustomClass &quot;red&quot;] [
                Radio.input [
                Radio.Input.name &quot;color&quot;
                Radio.Input.props [
                    Checked (model.SpanCls = Red)
                    OnChange (fun _ -&gt; Red |&gt; ChangeColor |&gt; dispatch)
                    ]
                ]
                str &quot;Red&quot;
            ]
            Radio.radio [CustomClass &quot;green&quot;] [
                Radio.input [
                Radio.Input.name &quot;color&quot;
                Radio.Input.props [
                    Checked (model.SpanCls = Green)
                    OnChange (fun _ -&gt; Green |&gt; ChangeColor |&gt; dispatch)
                    ]
                ]
                str &quot;Green&quot;
            ]
            Radio.radio [CustomClass &quot;yellow&quot;] [
                Radio.input [
                Radio.Input.name &quot;color&quot;
                Radio.Input.props [
                    Checked (model.SpanCls = Yellow)
                    OnChange (fun _ -&gt; Yellow |&gt; ChangeColor |&gt; dispatch)
                    ]
                ]
                str &quot;Yellow&quot;
            ]
            Radio.radio [CustomClass &quot;blue&quot;] [
                Radio.input [
                    Radio.Input.name &quot;color&quot;
                    Radio.Input.props [
                    Checked (model.SpanCls = Blue)
                    OnChange (fun _ -&gt; Blue |&gt; ChangeColor |&gt; dispatch)
                    ]
                ]
                str &quot;Blue&quot;
            ]
            ]

            Control.control_div [] [
            Input.input [
                Input.typeIsText
                Input.placeholder &quot;AddSomething&quot;
                Input.value model.LocalStr
                Input.props [
                OnChange (fun ev -&gt; !!ev.target?value |&gt; ChangeStr |&gt; dispatch)
                ]
            ]
            ]
            Button.button_btn [
            Button.onClick (fun _ -&gt; PreparePost |&gt; dispatch)
            ] [str &quot;Post&quot;]
        ]
</code></pre>

<p>Normally I skip the view part. As html is not that interesting. But this is different. It is not only statically typed HTML, but also having <a href="https://bulma.io/">Bulma</a> wrapped with staticially typed functions. Means if this compiles you don&rsquo;t have to worry about even CSS typos. Thanks to <a href="https://mangelmaxime.github.io/Fulma/">Fulma</a>. And that is how you write html-css with confidence.</p>

<h4 id="update">Update</h4>

<pre><code>    let update msg model =
        match msg with
        | ChangeStr s -&gt;
            {model with LocalStr = s}, Cmd.none
        | ChangeColor s -&gt;
            {model with SpanCls = s}, Cmd.none
        | PreparePost -&gt;
            let inputMessage = dtos.InputMessage.Create()
            let message = dtos.Message.Create()
            message.color &lt;- model.SpanCls.ToString()
            message.data &lt;- model.LocalStr
            inputMessage.created &lt;- DateTime.Now.ToString()
            inputMessage.userId &lt;- 0.
            inputMessage.message &lt;- message
            let postCmd = Cmd.ofMsg (PostMessage inputMessage)
            model,postCmd
        | PostMessage pm -&gt;
            let msgPost (msg : InputMessage) =
            client.post (msg :&gt; IReturn&lt;OutPutMessages&gt;)
            let helloCmd (msg: InputMessage) =
            Cmd.ofPromise msgPost msg SuccessMessages Failed
            let msgCmd = helloCmd pm
            model, msgCmd
        | SuccessMessages o -&gt;
            {model with ServerMessages = o.data.ToArray(); LocalStr = &quot;&quot;}, Cmd.none
        | SSESuccessMessages o -&gt;
            {model with ServerMessages = o.data.ToArray()}, Cmd.none
        | Failed exn -&gt;
            model, Cmd.none
</code></pre>

<p>A very simple update method. Now closely look at <em>PreparePost</em> message. That is where Fable ecosystem shined, I am mutating thing. As it is not that strict. And for the fact <code>mutable is not that bad,</code> but <code>shared mutable is very bad</code>. I am preparing post command here and the hand it over to another method. And from there it will go forward.</p>

<h2 id="ts2fable">ts2fable</h2>

<p>In above <em>PreparePost</em> and <em>PostMessage</em> message; there are few things like <em>dtos</em> and <em>client</em> . That all comes thanks to ts2fable. A library used to convert <code>typescript</code> definition file to F# imports. It is quite magical and super awesome. Currently in beta but works most of the time for around 95% of the code.</p>

<p>And here is code how you use it.</p>

<pre><code>let [&lt;Import(&quot;*&quot;,&quot;@servicestack\client&quot;)&gt;] SSClient: SSClient.IExports = jsNative

let [&lt;Import(&quot;*&quot;,&quot;./../Imports/IndianChaat.dtos&quot;)&gt;] dtos: IExports = jsNative
</code></pre>

<p>Simple one line import and all library functions are available in your project.</p>

<p>Convert <em>index.d.ts</em> from <em>@servicestack\client</em> to create <code>Servicestck Import</code> file. And then just pull it in your code. Client library is also provided by Servicestck - (another good thing about framework). And it is having quite complete typed library for TypeScript. So, you use that just like that with Fable.</p>

<blockquote>
<p>What about <em>dtos</em>?</p>
</blockquote>

<p>You can generate typescript dtos using <em>@servicestack\cli</em>&rsquo;s command <code>ts-ref &lt;url&gt; &lt;filname - optional&gt;</code>. Then using <code>tsc -d</code> command create js and definition files. And then using ts2fable convert to import file. Then pull it in your project. Seems little complicated but it is just few commands.</p>

<p>So, now you have typed client library with typed dtos for you. Here are the Dtos</p>

<pre><code>type [&lt;AllowNullLiteral&gt;] OutPutMessages =
    abstract data: ResizeArray&lt;Message&gt; with get, set

type [&lt;AllowNullLiteral&gt;] OutPutMessagesStatic =
    [&lt;Emit &quot;new $0($1...)&quot;&gt;] abstract Create: unit -&gt; OutPutMessages

type [&lt;AllowNullLiteral&gt;] Message =
    abstract data: string with get, set
    abstract color: string with get, set

type [&lt;AllowNullLiteral&gt;] InputMessage =
    inherit IReturn&lt;OutPutMessages&gt;
    abstract userId: float with get, set
    abstract created: string with get, set
    abstract message: Message with get, set
    abstract createResponse: unit -&gt; OutPutMessages
    abstract getTypeName: unit -&gt; string

type [&lt;AllowNullLiteral&gt;] InputMessageStatic =
    [&lt;Emit &quot;new $0($1...)&quot;&gt;] abstract Create: unit -&gt; InputMessage
</code></pre>

<blockquote>
<p>There is another way that you can directly share <code>dtos</code> from server file. That is the benefit of using F# on client and server both sides. <strong>Isomorphic F# all the way.</strong> But then I can&rsquo;t show great work done with <strong>ts2fable</strong> tool.</p>
</blockquote>

<h1 id="aaa-actor-agent-async">AAA - Actor-Agent-Async</h1>

<p>If we are talking about big application, then giving skip to <em>scale</em> word will not happen. And still most of the <em>Enterprise Application</em> moves around <em>Design Patterns</em>. But I am pretty sure that for the <code>AAA</code> size application you need <code>AAA</code> solution. You can use all or either of it. Power and Flexibility are also in the same order as mentioned in the title. Means Actors are more powerful and flexible while Async is least. Actor is having referential transparency while agent don&rsquo;t. Due to this Actors are more suitable for Micro-service kind of architecture. Using actors you can offload your heavy process to another machine without any issue. Also, it&rsquo;s easy to set up cluster with them. That is not possible with agents. I guess <code>Async</code> is pretty much known by everyone. Also, <code>Async</code> is widely used and should be used whenever you are accessing I/O stuff. All will agree that Async is quite necessary, but at the same time difficult to implement correctly. (I am not considering Java in here. The syntax is so horrific.)</p>

<p>For a simplicity case I am using Agent here. Just taking a middle ground here.</p>

<pre><code>    type Utility() =
        static let rand = Random()

        static member RandomSleep() =
            let ms = rand.Next(1,1000)
            Thread.Sleep ms


    let storage = new List&lt;Message&gt;()

    let blastAgent = Agent&lt;List&lt;Message&gt;&gt;.Start(fun inbox -&gt;
        let rec messageLoop() = async {
            let! msg = inbox.Receive()
            Utility.RandomSleep()
            let sse = ServiceStack.ServiceStackHost.Instance.Container.TryResolve&lt;ServiceStack.IServerEvents&gt;()
            let blastObject = {Data = (msg.ToArray())}
            sse.NotifyChannel(&quot;home&quot;,&quot;cmd.chat&quot;, blastObject)
            return! messageLoop()
        }
        messageLoop()
    )

    let chaatAgent = Agent&lt;InputMessage&gt;.Start(fun inbox -&gt;
        let rec messageLoop() = async {
            let! msg = inbox.Receive()
            Utility.RandomSleep()
            storage.Add(msg.Message)
            blastAgent.Post storage
            return! messageLoop()
        }
        messageLoop()
    )
</code></pre>

<p>Agents are async in nature. Always take one message from the queue. So, you don&rsquo;t have to worry about <code>locks</code> or <code>mutability</code>. They run in isolation. So, no more stepping on anyone&rsquo;s foot. Basically, in simple words they are queue with processing brain. If you take the line <code>let sse = ServiceStack.ServiceStackHost.Instance.Container.TryResolve&lt;ServiceStack.IServerEvents&gt;()</code>, here I am messaging from server to client using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">SSE-Server Sent Events</a>. Mighty Servicestack provide support for it out of box.</p>

<p>And here is code on client side.</p>

<pre><code>    let subscribe =
        let socketSubscription dispatch = 
            let eventSourceOptions = createEmpty&lt;IEventSourceOptions&gt;
            eventSourceOptions.handlers &lt;- createObj [
                // &quot;onConnect&quot; ==&gt; fun (sub : ServerEventConnect) -&gt; printfn &quot;onConnect: %A&quot; sub.displayName
                // &quot;onJoin&quot; ==&gt; fun (msg: ServerEventJoin) -&gt; printfn &quot;onJoin: %A&quot; msg.displayName
                // &quot;onLeave&quot; ==&gt; fun (msg: ServerEventLeave) -&gt; printfn &quot;onLeave: %A&quot; msg.displayName
                // &quot;onUpdate&quot; ==&gt; fun (msg : ServerEventUpdate) -&gt; printfn &quot;onUpdate %A&quot; msg.displayName
                &quot;onMessage&quot; ==&gt; fun (msg: ServerEventMessage) -&gt; printfn &quot;onMessage %A&quot; msg.json
                &quot;chat&quot; ==&gt; fun (msg : OutPutMessages) -&gt;
                                msg |&gt; (SSESuccessMessages &gt;&gt; dispatch)
            ] |&gt; Some |&gt; Some

            let channels = [|&quot;home&quot;; &quot;&quot;|]
            SSClient.ServerEventsClient.Create(baseUrl
            , new List&lt;string&gt;(channels)
            , eventSourceOptions
            ).start() |&gt; ignore
        Cmd.ofSub socketSubscription
</code></pre>

<p>More power to Fable and their support for the dynamic nature of JavaScript. If you can see above code is a mixture of Static and Dynamic typing. While I am creating object using static type <code>IEventSourceOptions</code>, I am registering handler using Fable&rsquo;s dynamic support to crate <code>JS object</code> on the fly. And from here to again goes to <code>update</code> method using dispatch, from there application loop will take over.</p>

<p>Here is a wonderful <a href="http://bartoszsypytkowski.com/the-state-of-a-state-based-crdts/">article explaining CRDTs</a> that is using AKKA. In my personal opinion Micro-Service should be more logical and process separation instead of <em>team</em> separation. If <a href="https://blog.bradfieldcs.com/you-are-not-google-84912cf44afb">you are not Google</a> then you can&rsquo;t and should not match them step by step.</p>

<h1 id="business-business-business">Business Business Business</h1>

<p>There are three things important for any Software <code>Business Business Business</code> . Be it architecture, UX or scale. All boils down to business. For me, I like my compiler to do work for me. I don&rsquo;t want to write more code as more code means more errors. Also code should be kind of future friendly.</p>

<p>It is the reason behind picking up language and frameworks. In above use case I am replying with a message that is not updated. I am sending across old message. By doing this I am not blocking the user for the reply. Even not in async loop. And then I am changing message under the table when they arrived via SSE. This makes UX way better as there will always be reply for user.</p>

<p>Take any big application like youtube / rotten tomatoes. They are giving rating for video or movie. Many users are giving their <code>star</code> ratings. And I am updating average stars based on that. So, here I am not blocking user and allowing them to continue. Here, either you can change things in client or wait for SSE to come with updated message. User never bother unless and until s/he knows that his input is taken care of.</p>

<p>Another thing is. JavaScript runs everywhere. OK, that is Given. You can&rsquo;t escape from it. But that don&rsquo;t tie your hands to use it. You can use any damn thing that transpile to JavaScript. Elmish / Elm architecture push you to make big application using small isolated lego pieces. It will force you to think in that direction. It may hurt in start, but once your project reaches a considerable size, then you will thank your previous self for this. And no <code>null</code> or <code>object not found</code> or <code>function is not an object</code> or <code>object object</code> error.</p>

<p>As you have seen fable is quite more flexible in nature, and here I can joined forces with Servicestack client with it. So, I don&rsquo;t even have to give specific url path to make request or decode json on this side. It just works. Without any issue.</p>

<p>All this is great, now what next?</p>

<h1 id="docker">Docker</h1>

<p>There are many containers out there. But I am choosing <a href="https://www.docker.com/">docker here</a>. I am not biased but as Docker is a kind of front runner now a days. And it will make you future safe(hopefully). Give or take 5-10 years. If you are just starting things out with your project and not sure about how good it will go. Run docker with <a href="http://dokku.viewdocs.io/dokku/">Dokku</a>, if you are scaling things up then can use any docker based hosting. And for every other use cases there is <a href="https://kubernetes.io/">kubernetes</a> . Using docker is having one <code>side effect</code> that you are not locking your self into any vendor.</p>

<p>My favorite <em>development time benefit</em> is that you don&rsquo;t have to set up every environment. Once done is done. If you are still not using docker in the <em>development</em> pipeline, while developing your application, you are making a big mistake and you should start using it. Yes, for development purpose also. Don&rsquo;t forget to check in your docker file so every team member is testing / running application against the same environment.</p>

<h1 id="fake-paket">Fake Paket</h1>

<p>All this stuff will not be possible without twin F# heroes. <a href="https://fake.build/">Fake</a> and <a href="https://fsprojects.github.io/Paket/">Paket</a>. Everything above is good and shiny but without joining them together, it is not useful also more importantly not fun. Fake and paket exactly doing the same.</p>

<p>Paket is way better package manager than nuget ever will be. And Fake is build tool that can run anything and everything literally.</p>

<p>While developing this application, I had kept them running, that ran my test, server code in watch mode while fable in hot reload mode.</p>

<blockquote>
<p>Above things are mostly inspired / copy-pasted things from <a href="https://safe-stack.github.io/">SAFE stack</a>. Obviously changing things as per my personal taste. And that makes my development experience so pleasant. Specially feedback loop is quite fast, that make coding more fun. No more F5, no more breaking point in JavaScript and trying to debug what the hell [object object] is?</p>
</blockquote>

<p>This is my one and only 2017 post. Hope you enjoyed it. Happy to have feedback either here or just tweet it to me.
Complete code for this you can find at my <a href="https://github.com/kunjee17/indian-chaat">github repo</a>.</p>

<blockquote>
<p>Don&rsquo;t forget to read below list for other alternatives. If I missed anything then let me know I ll update it.</p>
</blockquote>

<h1 id="epilogue">Epilogue</h1>

<ul>
<li>F# - If you looking for alternative C# is good option but you should go for Q#.</li>
<li>Server side frameworks - <a href="https://suave.io/">Suave</a> - kind of default with SAFE, <a href="https://github.com/giraffe-fsharp/Giraffe">Giraffe</a> if you like aspnetcore, <a href="https://freya.io/">Freya</a> crazy fast option</li>
<li>Honorable mention for Server Side Frameworks - <a href="http://nancyfx.org/">NancyFx</a> - can&rsquo;t miss this sweet framework</li>
<li>Fable alternatives - ReasonML, Elm, OCaml, Pure Script, Clojure Script</li>
<li>Elmish alternatives - React - Redux, Elm, Vue - Redux</li>
<li>Actor Frameworks - <a href="https://akka.io/">Akka</a>, <a href="http://proto.actor/">Proto-Actor</a></li>
<li>Async Framework - <a href="http://hopac.github.io/Hopac/Hopac.html">Hapoc</a></li>
<li>Fake &amp; Paket alternatives - Nuget &amp; Sln file if you are seriously not happy with your life</li>
<li><a href="https://github.com/kunjee17/awesome-fable">Awesome Fable</a></li>
</ul>

<p>There are many people from F# community I like to thank for this post. Without them this will not be possible. But personally I like to thank <a href="https://twitter.com/sforkmann">Steffen Forkmann</a> for Fake and Paket. Man if you are ever coming to India, <strong>Chaat</strong> on me.</p>

<p><iframe src="https://giphy.com/embed/dIm3qgyzenCh2" width="480" height="235" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/dIm3qgyzenCh2">via GIPHY</a></p></p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/oss/">OSS</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/servicestack/">Servicestack</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/actors/">Actors</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/docker/">Docker</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/devops/">DevOps</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/fsharp/">FSharp</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/functional/">Functional</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/functional-web/">Functional Web</a>

  <a class="tag tag--primary tag--small" href="http://kunjan.in/tags/dotnetcore/">Dotnetcore</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://kunjan.in/2016/12/epic-adventure-using-fsharp/" data-tooltip="Epic Adventure using F#">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2017 Kunjan Dalal. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://kunjan.in/2016/12/epic-adventure-using-fsharp/" data-tooltip="Epic Adventure using F#">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/3d7c012bb27ad7b2f40976c5edc58968?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Kunjan Dalal</h4>
    
      <div id="about-card-bio"><em>All idea, opinion are my own and don&rsquo;t reflect opinion of my current or any former employer.</em></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Functional Developer&hellip; Literally!
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        India
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2017/12/indian-chaat-with-fsharp/">
                <h3 class="media-heading">Indian Chaat with F#</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Here is my Birthday blog post, as a part of FSAdvent - 2017. Just like previous two years, I hope you will enjoy this one too. Comments and corrections are very much welcomed.
 Why Chaat? and What is Chaat? If anyone wanted to show real time application, then Chat is kind of to-do list of that type of applications. Now Functional Chat is a very limited title and can&rsquo;t show all the things I wanted to show.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2016/12/epic-adventure-using-fsharp/">
                <h3 class="media-heading">Epic Adventure using F#</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This article is part of FSAdvent 2016 calendar.
This my second post of 2016. Sadly not much of writing this year. So, I need to cover up by this little longish post. So, grab your favorite coffee / tea before getting started.
There is one wonderful coincidence here that both post of 2016 is based on Epic Mahabharata. If anyone interested in poem like things do check out my another post.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2016/04/my-identity/">
                <h3 class="media-heading">My Identity</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Few words dedicated to people who made me who I am right now, my teachers. I know few of them personally and few others I am yet to meet in person. But they are still there always for me. Guiding me and helping me whenever and wherever I need. Words are not enough to say Thanks but still here with my small try
Here is original Gujarati Version
જેને કોઈ ઓળખની જરૂર નથી</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/12/1729/">
                <h3 class="media-heading">1729</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This post is part of F# Advent calender. Thanks Sergey Tihon for arranging this and giving me chance.
 First I like to clarify that this was not my original choice for FSAdvent calender. I was going to write long post about web, AKKA, api and real time system. My current working area. But this time&rsquo;s calender entries are reaching new level and dimension. And recent post from Evelina Gabasova is kind of reason behind change.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/11/reactive-services-with-servicestack-and-fsharp/">
                <h3 class="media-heading">Reactive Services with Servicestack and F#</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Reactive word is not new nowadays. If you want your library to get limelight, use reactive word in the name any way possible and it will definitely get initial attention. Reactive word is appropriate for things that follows reactive manifesto. That is true for now. And there are many variant of libraries on server and client to fulfil this.
Let&rsquo;s start from the start of web.
We were having old web were we used to do post event of page.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/11/azure-web-sites-with-paket/">
                <h3 class="media-heading">Azure web sites with Paket</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Whoever worked with Microsoft Shop knows about nuget. It is package manager for anything and everything related to .Net. And it is getting better and better with versions coming in. But again it is nowhere near maturity needed to work with projects having many small projects. Things get cranky soon.
Now, there is better option as per my opinion called Paket. Very easy to get started. And so damn reliable. Couple of more command to learn but I guess it is ok.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/11/angularjs-and-the-mess-we-are-in/">
                <h3 class="media-heading">Angularjs and the Mess we are in</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Who doesn&rsquo;t know Angularjs?!? Everyone worked is web, mobile, server, windows, mac, Linux, Google, Microsoft or anyway related to this knows about it. And its fun when people tell me
 You know about angularjs. Its pretty hot now a days. I&rsquo;m planning to learn it.
 Oh man&hellip;
Ok I am no expert here in Angularjs. And I prefer not to be expert with any framework. Be it anything.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/04/functional-command-pattern/">
                <h3 class="media-heading">Functional Command Pattern</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Command pattern is a pattern which allows executor of the pattern to execute or playback the commands. In most of the application wherever Undo/Redo is implemented this pattern is used.
Here is C# code.
 Now, in this code Command Pattern is not in its purest form. As, normally in command pattern we are saving state of outside object. Instead I just returned the result to mock out side object.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/04/functional-strategy-pattern/">
                <h3 class="media-heading">Functional Strategy Pattern</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Another pattern that is widely used in Object Oriented world. And as far as .Net world is concern it is may be most used pattern in wide range of .Net API. And it heavily used in heavily used LINQ API.
So, I guess giving a understanding of that is kinda waste of space. Have a look at C# code.
 People familiar with LINQ and lovers of Lambda will definitely argue that this is can be replaced by delegates.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://kunjan.in/2015/04/functional-singleton-pattern/">
                <h3 class="media-heading">Functional Singleton Pattern</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">This is my favorite pattern. First pattern I learn. And till date I don&rsquo;t know where to use it. So, I use everywhere. :P
I have mainly used for database connection object and then all JavaScript frameworks are exposing Singleton object only. I can say it is quite useful in case of web.
Fun part about this pattern is that most of the people including me always use this pattern to show off that we know patterns and we follow it in practice but in most cases that practice starts and stops with Singleton Pattern.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         62 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://kunjan.in/images/cover.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="http://kunjan.in/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'http:\/\/kunjan.in\/2017\/12\/indian-chaat-with-fsharp\/';
          
            this.page.identifier = '\/2017\/12\/indian-chaat-with-fsharp\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'kunjan';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

